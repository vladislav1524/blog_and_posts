{% extends "blog/base.html" %}

{% block title %}Регистрация{% endblock %}

{% block content %}
    <div class="container mt-5">
        <h1 class="text-center mb-4">Регистрация</h1>
        <div class="card">
            <div class="card-body">
                <p class="card-text text-center">Введите данные для регистрации</p>
                <form method="post" action="{% url 'register' %}" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="username" class="form-label">Ваше имя:</label>
                        <input type="text" name="username" id="id_username" class="form-control" value="{{ form.username.value|default_if_none:'' }}">
                        {% if form.username.errors %}
                            <div class="text-danger">{{ form.username.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email:</label>
                        <input type="email" name="email" id="id_email" class="form-control" value="{{ form.email.value|default_if_none:'' }}">
                        {% if form.email.errors %}
                            <div class="text-danger">{{ form.email.errors }}</div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        <label for="date_of_birth" class="form-label">Дата рождения:</label>
                        <input type="text" name="date_of_birth" id="id_date_of_birth" class="form-control" placeholder="Выберите дату">
                        {% if form.date_of_birth.errors %}
                            <div class="text-danger">{{ form.date_of_birth.errors }}</div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        <label for="image" class="form-label">Фото профиля:</label>
                        <input type="file" name="image" id="id_image" class="form-control" accept="image/*">
                        {% if form.image.errors %}
                            <div class="text-danger">{{ form.image.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <label for="password1" class="form-label">Пароль:</label>
                        <input type="password" name="password1" id="id_password1" class="form-control">
                        {% if form.password1.errors %}
                            <div class="text-danger">{{ form.password1.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <label for="password2" class="form-label">Подтвердите пароль:</label>
                        <input type="password" name="password2" id="id_password2" class="form-control">
                        {% if form.password2.errors %}
                            <div class="text-danger">{{ form.password2.errors }}</div>
                        {% endif %}
                    </div>
                    <input type="submit" class="btn btn-primary w-100" value="Зарегистрироваться">
                </form> <br>
                <ul class="list-unstyled">
                      <li class="mb-3">
                          <a class="btn btn-primary btn-block" href="{% url 'social:begin' 'vk-oauth2' %}">                                                                                                                                                 
                              Войти с VK
                          </a>
                      </li>
                      <li>
                          <a class="btn btn-danger btn-block" href="{% url 'social:begin' 'google-oauth2' %}">
                              Войти с Google
                          </a>
                      </li>
                  </ul>
            </div>
        </div>
    </div>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.ru.min.js"></script>

    <script>
        $(document).ready(function() {
            $('#id_date_of_birth').datepicker({
                format: 'yyyy-mm-dd',
                autoclose: true,
                todayHighlight: true,
                language: 'ru' 
            }).on('changeDate', function(e) {
                $(this).val(e.format());
            });
        });
    </script>
{% endblock %}
